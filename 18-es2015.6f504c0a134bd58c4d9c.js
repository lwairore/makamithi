(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{C0of:function(t,e,i){"use strict";i.r(e),i.d(e,"ShopDetailsModule",(function(){return bt}));var c=i("ofXK"),n=i("tyNb"),s=i("fXoL"),o=i("i23I"),a=i("joJT"),r=i("Mpt7"),b=i("quSY"),l=i("cxbk"),u=i("mwRl"),d=i("oFSl"),p=i("YuHs"),m=i("VBA1"),g=i("8NUV"),h=i("03QB"),f=i("xJkR"),S=i("Fnnk"),v=i("kREL"),R=i("pkgd"),w=i("fQrM");const D=function(){return{height:"300px",width:"100%"}};function A(t,e){1&t&&(s.Sb(0,"div",20),s.Nb(1,"ngx-skeleton-loader",12),s.Rb()),2&t&&(s.Ab(1),s.mc("theme",s.oc(1,D)))}function k(t,e){1&t&&(s.Qb(0),s.Ec(1,A,2,2,"ng-template",19),s.Pb())}const I=function(){return{height:"90px",width:"90px"}};function P(t,e){1&t&&(s.Sb(0,"a",22),s.Nb(1,"ngx-skeleton-loader",12),s.Rb()),2&t&&(s.Ab(1),s.mc("theme",s.oc(1,I)))}function _(t,e){1&t&&(s.Qb(0),s.Ec(1,P,2,2,"ng-template",21),s.Pb())}const x=function(){return{height:"25px",width:"70%"}};function E(t,e){1&t&&(s.Sb(0,"span"),s.Nb(1,"ngx-skeleton-loader",12),s.Rb()),2&t&&(s.Ab(1),s.mc("theme",s.oc(1,x)))}const N=function(){return{height:"25px",width:"100%"}},y=function(){return{height:"150px",width:"100%"}},O=function(){return{height:"50px",width:"50px"}};function F(t,e){if(1&t&&(s.Sb(0,"section",2),s.Sb(1,"div",3),s.Sb(2,"div",4),s.Sb(3,"div",5),s.Sb(4,"mak-pit-tabs",6),s.Sb(5,"div",7),s.Sb(6,"mak-pit-tab-item"),s.Ec(7,k,2,0,"ng-container",8),s.fc(8,"generateFakeObjects"),s.Rb(),s.Rb(),s.Sb(9,"mak-pit-tab-list",9),s.Ec(10,_,2,0,"ng-container",8),s.fc(11,"generateFakeObjects"),s.Rb(),s.Rb(),s.Rb(),s.Sb(12,"div",5),s.Sb(13,"div",10),s.Sb(14,"div",11),s.Sb(15,"h1"),s.Nb(16,"ngx-skeleton-loader",12),s.Rb(),s.Sb(17,"div",13),s.Sb(18,"span"),s.Nb(19,"ngx-skeleton-loader",12),s.Rb(),s.Sb(20,"span",14),s.Nb(21,"ngx-skeleton-loader",12),s.Rb(),s.Rb(),s.Sb(22,"div",15),s.Ec(23,E,2,2,"span",16),s.Rb(),s.Rb(),s.Sb(24,"p"),s.Nb(25,"ngx-skeleton-loader",12),s.Rb(),s.Sb(26,"div",17),s.Nb(27,"ngx-skeleton-loader",18),s.Nb(28,"ngx-skeleton-loader",18),s.Nb(29,"ngx-skeleton-loader",18),s.Nb(30,"ngx-skeleton-loader",18),s.Nb(31,"ngx-skeleton-loader",18),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t){const t=s.ec();s.Ab(7),s.mc("ngForOf",s.gc(8,12,3)),s.Ab(3),s.mc("ngForOf",s.gc(11,14,3)),s.Ab(6),s.mc("theme",s.oc(16,N)),s.Ab(3),s.mc("theme",s.oc(17,x)),s.Ab(2),s.mc("theme",s.oc(18,x)),s.Ab(2),s.mc("ngIf",t.productDetails.has("totalSales")),s.Ab(2),s.mc("theme",s.oc(19,y)),s.Ab(2),s.mc("theme",s.oc(20,O)),s.Ab(1),s.mc("theme",s.oc(21,O)),s.Ab(1),s.mc("theme",s.oc(22,O)),s.Ab(1),s.mc("theme",s.oc(23,O)),s.Ab(1),s.mc("theme",s.oc(24,O))}}function T(t,e){if(1&t&&(s.Sb(0,"div",20),s.Nb(1,"mak-pit-img-lazy",28),s.Rb()),2&t){const t=s.ec().$implicit;s.Ab(1),s.mc("src",t.get("src"))("alt",t.get("alt"))}}function j(t,e){1&t&&(s.Qb(0),s.Ec(1,T,2,2,"ng-template",19),s.Pb())}function L(t,e){if(1&t&&(s.Sb(0,"a",22),s.Nb(1,"mak-pit-img-lazy",29),s.Rb()),2&t){const t=s.ec().$implicit;s.Ab(1),s.mc("src",t.get("src"))("alt",t.get("alt"))}}function G(t,e){1&t&&(s.Qb(0),s.Ec(1,L,2,2,"ng-template",21),s.Pb())}function M(t,e){if(1&t&&(s.Sb(0,"mak-pit-tabs",6),s.Sb(1,"div",7),s.Sb(2,"mak-pit-tab-item"),s.Ec(3,j,2,0,"ng-container",8),s.Rb(),s.Rb(),s.Sb(4,"mak-pit-tab-list",9),s.Ec(5,G,2,0,"ng-container",8),s.Rb(),s.Rb()),2&t){const t=s.ec(2);s.Ab(3),s.mc("ngForOf",t.productDetails.get("productImages")),s.Ab(2),s.mc("ngForOf",t.productDetails.get("productImages"))}}const C=function(){return["price","was"]};function Q(t,e){if(1&t&&(s.Sb(0,"span",14),s.Gc(1),s.fc(2,"currency"),s.Rb()),2&t){const t=s.ec(2);s.Ab(1),s.Ic(" ",s.jc(2,1,t.productDetails.getIn(s.oc(6,C)),"KES","symbol",".2-2")," ")}}function $(t,e){if(1&t&&(s.Sb(0,"span"),s.Gc(1," Sales: "),s.Sb(2,"strong"),s.Gc(3),s.fc(4,"number"),s.Rb(),s.Rb()),2&t){const t=s.ec(2);s.Ab(3),s.Hc(s.ic(4,1,null==t.productDetails?null:t.productDetails.get("totalSales"),"1.0","en-US"))}}function J(t,e){1&t&&(s.Sb(0,"a",22),s.Gc(1,"Description"),s.Rb())}function H(t,e){1&t&&(s.Qb(0),s.Ec(1,J,2,0,"ng-template",32),s.Pb())}function K(t,e){if(1&t&&(s.Sb(0,"a",22),s.Gc(1),s.Rb()),2&t){const t=s.ec(4);s.Ab(1),s.Ic("Reviews (",t.productDetails.get("totalReviews"),")")}}function z(t,e){1&t&&(s.Qb(0),s.Ec(1,K,2,1,"ng-template",32),s.Pb())}function U(t,e){if(1&t&&(s.Sb(0,"div",33),s.Nb(1,"p",34),s.Rb()),2&t){const t=s.ec(4);s.Ab(1),s.mc("innerHTML",t.productDetails.get("description"),s.zc)}}function V(t,e){1&t&&(s.Qb(0),s.Ec(1,U,2,1,"ng-template",19),s.Pb())}function B(t,e){1&t&&s.Nb(0,"span",44)}const X=function(){return["clientImage","src"]},Y=function(){return["clientImage","alt"]};function q(t,e){if(1&t&&(s.Sb(0,"div",38),s.Sb(1,"div",39),s.Nb(2,"mak-pit-img-lazy",40),s.Rb(),s.Sb(3,"div",41),s.Sb(4,"h4"),s.Gc(5),s.Sb(6,"span"),s.Gc(7),s.fc(8,"date"),s.Rb(),s.Rb(),s.Sb(9,"div",42),s.Ec(10,B,1,0,"span",43),s.fc(11,"generateFakeObjects"),s.Rb(),s.Sb(12,"p"),s.Gc(13),s.Rb(),s.Rb(),s.Rb()),2&t){const t=e.$implicit;s.Ab(2),s.mc("src",t.getIn(s.oc(11,X)))("alt",t.getIn(s.oc(12,Y))),s.Ab(3),s.Ic("",t.get("fullName")," - "),s.Ab(2),s.Hc(s.hc(8,6,t.get("createdAt"),"longDate")),s.Ab(3),s.mc("ngForOf",s.gc(11,9,t.get("rating"))),s.Ab(3),s.Ic(" ",t.get("review")," ")}}function W(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",45),s.Sb(1,"div",26),s.Sb(2,"button",46),s.ac("click",(function(){return s.yc(t),s.ec(5).listProductReview()})),s.Gc(3,"Load more reviews"),s.Rb(),s.Rb(),s.Rb()}}function Z(t,e){if(1&t&&(s.Sb(0,"div",33),s.Sb(1,"div",35),s.Ec(2,q,14,13,"div",36),s.Rb(),s.Rb(),s.Ec(3,W,4,0,"div",37)),2&t){const t=s.ec(4);s.Ab(2),s.mc("ngForOf",t.reviews),s.Ab(1),s.mc("ngIf",t.paginationDetailsForReviews.get("next"))}}function tt(t,e){1&t&&(s.Qb(0),s.Ec(1,Z,4,2,"ng-template",19),s.Pb())}function et(t,e){if(1&t){const t=s.Tb();s.Sb(0,"mak-pit-tabs",6),s.Sb(1,"mak-pit-tab-list",30),s.ac("tabSelectedEvent",(function(e){return s.yc(t),s.ec(2).handleTabSelectedEvent(e)})),s.Ec(2,H,2,0,"ng-container",16),s.Ec(3,z,2,0,"ng-container",16),s.Rb(),s.Sb(4,"div",31),s.Sb(5,"mak-pit-tab-item"),s.Ec(6,V,2,0,"ng-container",16),s.Ec(7,tt,2,0,"ng-container",16),s.Rb(),s.Rb(),s.Rb()}if(2&t){const t=s.ec(2);s.Ab(2),s.mc("ngIf",t.productDetails.get("description")),s.Ab(1),s.mc("ngIf",t.productDetails.get("totalReviews")),s.Ab(3),s.mc("ngIf",t.productDetails.get("description")),s.Ab(1),s.mc("ngIf",t.productDetails.get("totalReviews"))}}const it=function(){return["price","now"]};function ct(t,e){if(1&t&&(s.Sb(0,"section",2),s.Sb(1,"div",3),s.Sb(2,"div",4),s.Sb(3,"div",5),s.Ec(4,M,6,2,"mak-pit-tabs",23),s.Rb(),s.Sb(5,"div",5),s.Sb(6,"div",10),s.Sb(7,"div",11),s.Sb(8,"h1"),s.Gc(9),s.Rb(),s.Sb(10,"div",13),s.Sb(11,"span"),s.Gc(12),s.fc(13,"currency"),s.Rb(),s.Ec(14,Q,3,7,"span",24),s.Rb(),s.Sb(15,"div",15),s.Ec(16,$,5,5,"span",16),s.Rb(),s.Rb(),s.Sb(17,"p"),s.Gc(18),s.Rb(),s.Nb(19,"div",17),s.Rb(),s.Rb(),s.Rb(),s.Sb(20,"div",25),s.Sb(21,"div",26),s.Sb(22,"div",27),s.Ec(23,et,8,4,"mak-pit-tabs",23),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t){const t=s.ec();s.Ab(4),s.mc("ngIf",t.productDetails.has("productImages")),s.Ab(5),s.Ic(" ",t.productDetails.get("title")," "),s.Ab(3),s.Ic(" ",s.jc(13,7,t.productDetails.getIn(s.oc(12,it)),"KES","symbol",".2-2")," "),s.Ab(2),s.mc("ngIf",t.productDetails.hasIn(s.oc(13,C))),s.Ab(2),s.mc("ngIf",t.productDetails.has("totalSales")),s.Ab(2),s.Ic(" ",t.productDetails.get("description")," "),s.Ab(5),s.mc("ngIf",t.productDetails.get("totalReviews")||t.productDetails.get("description"))}}let nt=(()=>{class t{constructor(t,e,i,c,n,s){this._shopService=t,this._changeDetectorRef=e,this._activatedRoute=i,this._scrollService=c,this._seoSocialShareService=n,this._location=s,this.productDetails=r.b({}),this._routeParams=r.a({}),this.reviews=r.b([]),this.paginationDetailsForReviews=r.a({next:0}),this.hasAlreadyFetchedReviewsAtLeastOnce=!1,this.showLoader=!1}ngOnInit(){this._extractRouteParams()}ngAfterViewInit(){this._retrieveProductDetails()}ngOnDestroy(){this._unsubscribeRouteParamsSubscription(),this._unsubscribeRetrieveProductDetailsSubscription(),this._unsubscribeListProductReviewSubscription()}_unsubscribeListProductReviewSubscription(){this._listProductReviewSubscription instanceof b.a&&this._listProductReviewSubscription.unsubscribe()}handleTabSelectedEvent(t){this.hasAlreadyFetchedReviewsAtLeastOnce||this.listProductReview()}_extractRouteParams(){this._routeParamsSubscription=this._activatedRoute.params.subscribe(t=>{const e=Object(a.c)(t.productID);Object(a.f)(e)&&(this._routeParams=this._routeParams.set("productID",e),this._scrollToTop())})}_unsubscribeRouteParamsSubscription(){this._routeParamsSubscription instanceof b.a&&this._routeParamsSubscription.unsubscribe()}_unsubscribeRetrieveProductDetailsSubscription(){this._retrieveProductDetailsSubscription instanceof b.a&&this._retrieveProductDetailsSubscription.unsubscribe()}_retrieveProductDetails(){this.showLoader||(this.showLoader=!0,this._manuallyTriggerChangeDetection());const t=this._routeParams.get("productID");Object(a.f)(t)&&(this._retrieveProductDetailsSubscription=this._shopService.retrieveProductDetail$(Object(a.d)(t)).subscribe(t=>{this.productDetails=r.b(t),console.log({details:t}),this.productDetails.isEmpty()||(this._seoSocialShareService.setData({title:t.title,keywords:t.keywords,description:t.description,image:t.productImages[0].src,imageAuxData:{secureUrl:t.productImages[0].src,alt:t.productImages[0].alt},type:"post",author:"Makamithi Agrovet",section:"article",published:t.createdAt,modified:t.modifiedDate,url:`${l.a.hostURL}${this._location.path()}`}),this.showLoader=!1,this._manuallyTriggerChangeDetection())},t=>console.error(t)))}listProductReview(){const t=Object(a.d)(this._routeParams.get("productID"));if(!Object(a.f)(t))return;let e=Object(a.c)(this.paginationDetailsForReviews.get("next"));Object(a.f)(e)&&(0===e&&(e=1),this._listProductReviewSubscription=this._shopService.listProductReview$(t,e).subscribe(t=>{this.paginationDetailsForReviews=this.paginationDetailsForReviews.set("next",Object(a.c)(t.next));const e=r.b(t.results);this.reviews=r.c(this.reviews,e),e.isEmpty()||this._manuallyTriggerChangeDetection(),this.hasAlreadyFetchedReviewsAtLeastOnce||(this.hasAlreadyFetchedReviewsAtLeastOnce=!0)}))}_scrollToTop(){this._scrollService.scrollToPosition(0,0)}_manuallyTriggerChangeDetection(){this._changeDetectorRef.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(u.a),s.Mb(s.h),s.Mb(n.a),s.Mb(d.a),s.Mb(p.a),s.Mb(c.i))},t.\u0275cmp=s.Gb({type:t,selectors:[["mak-pit-spshop-details-section"]],decls:3,vars:2,consts:[["class","shop-banner-area pt-120 pb-80",4,"ngIf","ngIfElse"],["showCtaSectionDetails",""],[1,"shop-banner-area","pt-120","pb-80"],[1,"container"],[1,"row"],[1,"col-xl-6","col-lg-6"],["selectedTabClassName","active"],[1,"product-details-img","mb-20"],[4,"ngFor","ngForOf"],["className","shop-thumb-tab mb-30"],[1,"product-details","mb-30"],[1,"product-details-title"],[3,"theme"],[1,"details-price","mb-20"],[1,"old-price"],[1,"pro-rating","mb-20"],[4,"ngIf"],[1,"product-social","mb-30"],["appearance","circle",3,"theme"],["makPitTabPanel",""],[1,"product-large-img"],["makPitTab",""],[1,"nav-link"],["selectedTabClassName","active",4,"ngIf"],["class","old-price",4,"ngIf"],[1,"row","mt-50"],[1,"col-xl-12"],[1,"product-review"],["height","300px","width","100%",3,"src","alt"],["height","90px","width","100%",3,"src","alt"],["className","nav review-tab",3,"tabSelectedEvent"],[1,"tab-content"],["makPitTab","","className","nav-item"],[1,"review-text","mt-30"],[3,"innerHTML"],[1,"product-commnets"],["class","product-commnets-list",4,"ngFor","ngForOf"],["class","row mt-40",4,"ngIf"],[1,"product-commnets-list"],[1,"pro-comments-img"],["height","60px","width","100%",3,"src","alt"],[1,"pro-commnets-text"],[1,"pro-rating"],["class","far fa-star",4,"ngFor","ngForOf"],[1,"far","fa-star"],[1,"row","mt-40"],[1,"btn","brand-btn",3,"click"]],template:function(t,e){if(1&t&&(s.Ec(0,F,32,25,"section",0),s.Ec(1,ct,24,14,"ng-template",null,1,s.Fc)),2&t){const t=s.vc(2);s.mc("ngIf",e.showLoader)("ngIfElse",t)}},directives:[c.m,m.a,g.a,c.l,h.a,f.a,S.a,v.a,R.a],pipes:[w.a,c.c,c.f,c.e],encapsulation:2,changeDetection:0}),t})();const st=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Gb({type:t,selectors:[["mak-pit-shop-details-main"]],decls:3,vars:0,consts:[["pageTitle","Product Details"]],template:function(t,e){1&t&&(s.Nb(0,"mak-pit-site-breadcrumb",0),s.Sb(1,"main"),s.Nb(2,"mak-pit-spshop-details-section"),s.Rb())},directives:[o.a,nt],encapsulation:2,changeDetection:0}),t})()}];let ot=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},imports:[[n.f.forChild(st)],n.f]}),t})();var at=i("PCNd"),rt=i("NNxv");let bt=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},imports:[[c.b,ot,at.a,rt.a,f.b]]}),t})()}}]);